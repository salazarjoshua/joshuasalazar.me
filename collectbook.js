const photocards =
  [
    // THE STORY BEGINS
    {
      "group": "TWICE",
      "album": "The Story Begins",
      "member": "Nayeon",
      "img": "/assets/photocards/The Story Begins/tsb-random-01-nayeon.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "The Story Begins",
      "member": "Tzuyu",
      "img": "/assets/photocards/The Story Begins/tsb-random-09-tzuyu.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "The Story Begins",
      "member": "Unit",
      "img": "/assets/photocards/The Story Begins/tsb-unit-00-twice.jpg",
      "category": "have"
    },
    //PAGE TWO
    {
      "group": "TWICE",
      "album": "Page Two",
      "member": "Dahyun",
      "img": "/assets/photocards/Page Two/pt-lenti-07-dahyun.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Page Two",
      "member": "Jihyo",
      "img": "/assets/photocards/Page Two/pt-random-05-jihyo.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Page Two",
      "member": "Dahyun",
      "img": "/assets/photocards/Page Two/pt-random-07-dahyun.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Page Two",
      "member": "Unit",
      "img": "/assets/photocards/Page Two/pt-unit-00-twice.jpg",
      "category": "have"
    },
    // FANCY YOU
    {
      "group": "TWICE",
      "album": "Fancy You",
      "member": "Chaeyoung",
      "img": "/assets/photocards/Fancy You/fy-mono-08-chaeyoung.jpg",
      "category": "have"
    },
    // TASTE OF LOVE
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Chaeyoung",
      "img": "/assets/photocards/Taste of Love/tol-lenti-08-chaeyoung.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "All Members",
      "img": "/assets/photocards/Taste of Love/tol-pob-00-twice.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Nayeon",
      "img": "/assets/photocards/Taste of Love/tol-pob-01-nayeon.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Jeongyeon",
      "img": "/assets/photocards/Taste of Love/tol-pob-02-jeongyeon.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Momo",
      "img": "/assets/photocards/Taste of Love/tol-pob-03-momo.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Sana",
      "img": "/assets/photocards/Taste of Love/tol-pob-04-sana.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Jihyo",
      "img": "/assets/photocards/Taste of Love/tol-pob-05-jihyo.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Mina",
      "img": "/assets/photocards/Taste of Love/tol-pob-06-mina.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Dahyun",
      "img": "/assets/photocards/Taste of Love/tol-pob-07-dahyun.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Chaeyoung",
      "img": "/assets/photocards/Taste of Love/tol-pob-08-chaeyoung.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Tzuyu",
      "img": "/assets/photocards/Taste of Love/tol-pob-09-tzuyu.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Nayeon",
      "img": "/assets/photocards/Taste of Love/tol-random-01-nayeon-2.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Nayeon",
      "img": "/assets/photocards/Taste of Love/tol-random-01-nayeon.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Sana",
      "img": "/assets/photocards/Taste of Love/tol-random-04-sana-2.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Sana",
      "img": "/assets/photocards/Taste of Love/tol-random-04-sana.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Taste of Love",
      "member": "Chaeyoung",
      "img": "/assets/photocards/Taste of Love/tol-random-08-chaeyoung.jpg",
      "category": "have"
    },
    // FORMULA OF LOVE
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "TWICE",
      "img": "/assets/photocards/Formula of Love/fol-pob-00-twice.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Nayeon",
      "img": "/assets/photocards/Formula of Love/fol-pob-01-nayeon.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Jeongyeon",
      "img": "/assets/photocards/Formula of Love/fol-pob-02-jeongyeon.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Momo",
      "img": "/assets/photocards/Formula of Love/fol-pob-03-momo.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Sana",
      "img": "/assets/photocards/Formula of Love/fol-pob-04-sana.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Jihyo",
      "img": "/assets/photocards/Formula of Love/fol-pob-05-jihyo.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Mina",
      "img": "/assets/photocards/Formula of Love/fol-pob-06-mina.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Dahyun",
      "img": "/assets/photocards/Formula of Love/fol-pob-07-dahyun.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Chaeyoung",
      "img": "/assets/photocards/Formula of Love/fol-pob-08-chaeyoung.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Tzuyu",
      "img": "/assets/photocards/Formula of Love/fol-pob-09-tzuyu.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Momo",
      "img": "/assets/photocards/Formula of Love/fol-random-03-momo.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Jihyo",
      "img": "/assets/photocards/Formula of Love/fol-random-05-jihyo.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Mina",
      "img": "/assets/photocards/Formula of Love/fol-random-06-mina.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Tzuyu",
      "img": "/assets/photocards/Formula of Love/fol-random-09-tzuyu.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Chaeyoung",
      "img": "/assets/photocards/Formula of Love/fol-sc-08-chaeyoung.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Tzuyu",
      "img": "/assets/photocards/Formula of Love/fol-sc-09-tzuyu.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Sana",
      "img": "/assets/photocards/Formula of Love/fol-scratch-04-sana.jpg",
      "category": "have"
    },
    {
      "group": "TWICE",
      "album": "Formula of Love",
      "member": "Tzuyu",
      "img": "/assets/photocards/Formula of Love/fol-sc-09-tzuyu.jpg",
      "category": "want"
    },
    {
      "group": "RV",
      "album": "Formula of Love",
      "member": "Sana",
      "img": "/assets/photocards/Formula of Love/fol-scratch-04-sana.jpg",
      "category": "want"
    }
  ];



// Populate Dropdown
function populateDropdown(dropdown, key) {
  const unique = photocards.map(item => item[key]).filter((value, index, self) => self.indexOf(value) === index);

  for (var i = 0; i < unique.length; i++) {
    var data = unique[i];
    document.createElement("button");
    var dropdownIndex = `<button value="${data}" data-filter="${key}">${data}</button>\n`
    dropdown.innerHTML += dropdownIndex;
  }
}

const categoryButtons = Array.from(document.querySelectorAll('[name="categories"]'));
const groupButtonContainers = document.querySelector('#groups');
const memberButtonContainers = document.querySelector('#members');

populateDropdown(groupButtonContainers, "group");
populateDropdown(memberButtonContainers, "member");


var groupButtons = Array.from(document.querySelectorAll('#groups button'));

var memberButtons = Array.from(document.querySelectorAll('#members button'));



// Filter Photocards
// memberDropDown.value = filters.member;
// groupDropDown.value = filters.group;
// categoryButtons.value = filters.category;

// Filter by Photocards
var filters = {
  member: "",
  group: "",
  category: "have",
};

function handleChangeFilter() {
  filters[this.dataset.filter] = this.value;
  console.log(this.dataset.filter);
  update();

}

categoryButtons.forEach((input) => input.addEventListener('click', handleChangeFilter));
groupButtons.forEach((button) => button.addEventListener('click', handleChangeFilter));
memberButtons.forEach((button) => button.addEventListener('click', handleChangeFilter));


function filterMembers(photocard) {
  return (!filters.member.length || photocard.member == filters.member);
}

function filterGroups(photocard) {
  return !filters.group.length || photocard.group == filters.group;
}

function filterCategories(photocard) {
  return !filters.category.length || photocard.category == filters.category
}

function update() {
  let filteredCards = photocards.filter(filterMembers).filter(filterGroups).filter(filterCategories);

  photocardsContainer.innerHTML = ""
  if (filteredCards.length == 0) {
    photocardsContainer.innerHTML = `
    <div style="text-align: center;">
    <img src="/assets/avatar-sad.svg" alt="" style="display: inline-block;">
    <h3>Seems like I don’t have that photocard :(</h3>
    <p class="text-sm">You can always buy me one though.</p>
    </div>
    `
  }
  const photocardsList = document.createElement('ul');
  photocardsList.classList.add('photocards');
  photocardsContainer.appendChild(photocardsList);
  photocardsList.innerHTML = filteredCards.map(photocard => `<li><img src="${photocard.img}" alt="${photocard.group} - ${photocard.member}" class="photocard"></li>`).join("");
};

update();
